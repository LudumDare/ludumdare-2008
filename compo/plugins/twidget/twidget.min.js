function GetTwitchTVPlayer(t,e,i){var a="";return a+='<iframe src="http://www.twitch.tv/'+t+'/embed" frameborder="0" scrolling="no" ',a+='height="'+i+'" width="'+e+'"></iframe>'}function ShowTwitchTVVideo(t){var e=TwitchTV_Streams,i="";if(TwitchTV_CurrentStream>=0&&TwitchTV_CurrentStream<e.length){var a=e[TwitchTV_CurrentStream];i+=GetTwitchTVPlayer(a.channel.name,282,188,t,25)}else i+='<div style="vertical-align:middle;display:table-cell;width:282px;height:188px;">',i+='<span class="Intense">Live Streaming Video!</span><br />',i+="Click on a video to start playing<br />",i+="<br />",i+='<span style="font-size:20px;">To stream here, set your<br />',i+='<object data="'+TwitchTV_BaseDir+'TwitchLogo.svg" width="91" height="30" style="vertical-align:middle;display:inline-block;" type="image/svg+xml"></object> game to <span class="Standout">'+TwitchTV_Game+"</span>",i+="</span>",i+="</div>";var c=$("#TTV_Video");c.html(i)}function OnTwitchTVStopProp(t){t.stopPropagation()}function OnTwitchTVClicked(t){var e=TwitchTV_Streams;if(TwitchTV_CurrentStream>=0&&TwitchTV_CurrentStream<e.length){var i=$("#TTV_ItemId_"+TwitchTV_CurrentStream);i.removeClass("ItemSelected"),i.addClass("Item")}if(null!=t){var a=+t.replace("TTV_ItemId_",""),c=$("#"+t);a>=0&&a<e.length&&(c.removeClass("Item"),c.addClass("ItemSelected")),TwitchTV_CurrentStream=a,ShowTwitchTVVideo(!0)}else TwitchTV_CurrentStream=-1,ShowTwitchTVVideo(!1)}function GetTwitchTVStreams(){for(var t=TwitchTV_Streams,e="",i=0;i<t.length;i++){var a=t[i],c=a.channel.display_name.replace(new RegExp("_","g")," "),n=a.viewers;e+=i==TwitchTV_CurrentStream?"<div class='ItemSelected' onclick='OnTwitchTVClicked(this.id)' id='TTV_ItemId_"+i+"'>":"<div class='Item' onclick='OnTwitchTVClicked(this.id)' id='TTV_ItemId_"+i+"'>",e+='<img class="Item_Image" src="'+a.preview.small+'" width="80" height="50" />',e+='<span class="Item_Body">',e+='<span class="Item_Name">'+c+"</span><br />",e+='<span class="Item_Viewers">Viewers: <b>'+n+"</b></span>",e+='<span class="Item_Link"><a href="'+a.channel.url+'" target="_blank" onclick="OnTwitchTVStopProp(event)">( ... )</a></span>',e+="</span>",e+="</div>"}return TwitchTV_HasMoreStreams&&(e+='<div class="ItemMore">',e+='<div class="ItemMore_Body" onclick="LoadTwitchTVStreamsButton()">',e+='<div class="ItemMore_ButtonLeft"></div>',e+='<div id="TTV_More" class="ItemMore_Button">',e+='<div class="ItemMore_Text">More</div>',e+="</div>",e+='<div class="ItemMore_ButtonRight"></div>',e+="</div>",e+="</div>"),e}function LoadTwitchTVStreams(){Twitch.api({method:"streams",params:{game:TwitchTV_Game,limit:TwitchTV_Limit,offset:TwitchTV_Streams.length}},function(t,e){var i="";t?i+="Stream Fetch "+t+".<br />":(e.streams.length!=TwitchTV_Limit&&(TwitchTV_HasMoreStreams=!1),TwitchTV_Streams=TwitchTV_Streams.concat(e.streams),i+=GetTwitchTVStreams(),TwitchTV_VideoActive||(ShowTwitchTVVideo(!1),TwitchTV_VideoActive=!0));var a=$("#TTV_Streams");a.html(i)})}function LoadTwitchTVStreamsButton(){$("#TTV_More").html('<span class="ItemMore_Button">...</span>'),LoadTwitchTVStreams()}function SetTwitchStandbyButton(){$("#TTV_Standby_Container").html('<object id="TTV_Standby" data="'+TwitchTV_BaseDir+'ImgStandby.svg" width="22" height="22" type="image/svg+xml"></object>');var t=document.getElementById("TTV_Standby");t.addEventListener("load",function(){try{var e=t.contentDocument,i=e.getElementById("TTV_Standby_Icon");i.addEventListener("click",function(){OnTwitchTVClicked(null)},!1)}catch(a){console.log("Unable to bind function to Standby")}},!1)}function InitTwitchTV(){Twitch.init({clientId:TwitchTV_APIKey},function(t){t?MyText+="Twitch API "+t+".<br />":(SetTwitchStandbyButton(),LoadTwitchTVStreams())})}function GetTwitchTVWidget(){var t="",e="&nbsp;&nbsp;&nbsp;&nbsp;";return t+='<div id="TTV">',t+='<div class="Widget">',t+='<div id="TTV_Video" class="Head"></div>',t+='<div id="TTV_Streams" class="Body">Loading...</div>',t+='<div class="FarEdge"></div>',t+="</div>",t+='<div class="Foot">',t+='<div class="FootBody">',t+='<span class="FootImg">',t+='<object data="'+TwitchTV_BaseDir+'ImgTwitchGlitch.svg" width="24" height="24" type="image/svg+xml"></object>',t+="</span>",t+="&nbsp;&nbsp;",t+='<span class="FootText">',t+='<a href="http://www.twitch.tv/directory/game/'+encodeURI(TwitchTV_Game)+'" target="_blank"> View All Streams</a>',t+="</span>",t+=e,t+='<span class="FootText">',t+='<a href="'+TwitchTV_FAQ+'">FAQ</a>',t+="</span>",t+='<span id="TTV_Standby_Container" class="FootImg2">',t+='<object id="TTV_Standby" data="'+TwitchTV_BaseDir+'ImgStandby.svg" width="22" height="22" type="image/svg+xml"></object>',t+="</span>",t+="</div>",t+='<div class="FootEdge"></div>',t+="</div>",t+="</div>"}var TwitchTV_Limit=8,TwitchTV_CurrentStream=-1,TwitchTV_VideoActive=!1,TwitchTV_HasMoreStreams=!0,TwitchTV_Streams=[];